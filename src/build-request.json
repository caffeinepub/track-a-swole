{
  "kind": "build_request",
  "title": "Implement session state persistence for active workout across page refreshes",
  "projectName": "Track-A-Swole",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-25",
      "text": "Update the ActiveWorkout page in frontend/src/pages/ActiveWorkout.tsx to persist the current workout session state (session name, selected exercise IDs, and all entered set data including weight, reps, and comments for each exercise) to localStorage whenever any data changes",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-yes"
        ],
        "quotes": [
          "refresh shows nothing"
        ]
      },
      "acceptanceCriteria": [
        "Session name is saved to localStorage on change",
        "Exercise IDs are saved to localStorage when loaded from URL params",
        "All set data (weight, reps, comments) for each exercise is saved to localStorage as it's entered or modified",
        "localStorage key uses a consistent naming convention (e.g., 'activeWorkoutSession')"
      ]
    },
    {
      "id": "REQ-26",
      "text": "Update the ActiveWorkout page in frontend/src/pages/ActiveWorkout.tsx to restore the persisted workout session state from localStorage on component mount if available, prioritizing localStorage data over URL params when both exist",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-yes"
        ],
        "quotes": [
          "refresh shows nothing"
        ]
      },
      "acceptanceCriteria": [
        "On page load, check localStorage for saved session data",
        "If localStorage has saved session, restore session name, exercise list, and all set data",
        "If no localStorage data exists, fall back to loading exercises from URL params as currently implemented",
        "User can continue editing their workout exactly where they left off after refresh"
      ]
    },
    {
      "id": "REQ-27",
      "text": "Update the ActiveWorkout page in frontend/src/pages/ActiveWorkout.tsx to clear the persisted session data from localStorage after the 'Save Session' button successfully saves the workout to the backend",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-user-yes"
        ]
      },
      "acceptanceCriteria": [
        "After successful completeSession mutation, remove the activeWorkoutSession data from localStorage",
        "After clearing localStorage, the active workout state is also cleared as currently implemented",
        "Starting a new workout session after completing one does not show data from the previous session"
      ]
    }
  ],
  "constraints": [
    "Do not modify the existing completeSession mutation logic that already works correctly",
    "Do not change the backend schema or add new backend endpoints",
    "Maintain the existing session clearing behavior after successful save"
  ],
  "nonGoals": [
    "Implementing server-side session persistence",
    "Adding session recovery UI or prompts",
    "Implementing multiple concurrent session support",
    "Adding session auto-save functionality"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}